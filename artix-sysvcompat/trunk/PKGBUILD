# Maintainer: Muhammad Herdiansyah <koni@artixlinux.org>
# Maintainer: artoo <artoo@artixlinux.org>

pkgname=artix-sysvcompat
pkgver=0.4
pkgrel=2
pkgdesc="Artix Linux's init switching hooks"
arch=('any')
groups=('base')
url="https://gitea.artixlinux.org/artixlinux/packages"
depends=('svc-manager')
conflicts=('sysvinit' 'systemd-sysvcompat')
replaces=('sysvinit')
license=('GPL2')
source=('initswitch-hook'
        '55-initswitch.hook'
        '50-sysvcompat.hook')
sha256sums=('dab2a5f959b37d4f489111d999fec31f8c03d07ca9ec26400b0e556466b50b29'
            '994fee99d8515cbc3c93ac3271f1dff334a1959dfedff2a04927bf9781b91d81'
            '20d1e1170e6b2bfdb5b895cabc792e87f87abfdcaccc9f73a2dd6429aa0e3591')

package() {
	# pacman hooks
    install -Dm755 ${srcdir}/initswitch-hook "${pkgdir}"/usr/share/libalpm/scripts/initswitch-hook
    install -Dm644 -t "${pkgdir}"/usr/share/libalpm/hooks ${srcdir}/*.hook

    # provide default symlink for PM file tracking
    install -d "${pkgdir}"/usr/bin
    ln -sf openrc-init "${pkgdir}"/usr/bin/init
}
